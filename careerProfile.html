<!DOCTYPE html> 
<html>
 <head>
  <meta charset="UTF-8"> 
  <title>D3_HowTo</title>  
	<link rel="stylesheet" type="text/css" href="style_sheets/style.css"> 

 </head>
   <body>
	   <div class="titleBar"><h1>Career Profile Call</h1></div>
	   <p> This page is going to show you how to use the simplest call in the API, the Career Profile Call.
		   <p> Remember at the Blizzard dev portal, when you entered mukrumbus-1394, a request URL was posted underneath
			   <div class="wrapper"><img src="images/d3Explain_1.PNG"/></div>
	   <p>We can break this url apart to be able to use it for any player. 
	<br><p class="code">https://us.api.battle.net/d3/profile/mukrumbus-1394/?locale=en_US&apikey=7y2eektjvhfu98expct5hwm4w6hvb9r6
	   <br>
	   <ol>
	   <li><p>The first part, "https://us.api.battle.net/d3/profile/" is never going to change. We can use this as the beginning of our url and add more strings to it
	   <li><p>The second part,"mukrumbus-1394", is the username. We can use a variable, var Username1, to store the username so that we can find information on different players
	   <li><p>The third part, "locale=en_US", is the region where we can find the player.  We won't be going outside of the US, so we can leave this as a string.
	   <li><p>The fourth part, "&apikey=7y2eektjvhfu98expct5hwm4w6hvb9r6", is just a string and our api key.  We can store the api key as a variable, var apiKey, and use "&apikey=" + apiKey for the end of the url
	   </ol>
	<p>our req.open should look like this with the new url
		<p class="code">req.open('GET', 'https://us.api.battle.net/d3/profile/' + Username1 + '/?locale=en_US&apikey=' + apiKey, true);
		<br>
	<p>With this url, as long as we use a valid apiKey and a valid Username1, we can access the career profile of that player
	<p>Now we add the event listener, when the listener receives information, we check the status.  If req.status is between 200 and 400, we have success.  We can now parse the responseText and use the data.  We will call the parsed object player1.
		<p class="code"> var player1 = JSON.parse(req.responseText);
			<p>As shown earlier, here is the player1 object:
				<div class="wrapper"><textarea class="textScroll">{
    "battleTag": "mukrumbus#1394",
    "paragonLevel": 0,
    "paragonLevelHardcore": 0,
    "paragonLevelSeason": 0,
    "paragonLevelSeasonHardcore": 0,
    "guildName": "",
    "heroes": [{
        "id": 88593940,
        "name": "sandWitch",
        "class": "witch-doctor",
        "gender": 0,
        "level": 59,
        "kills": {
            "elites": 590
        },
        "paragonLevel": 0,
        "hardcore": true,
        "seasonal": false,
        "dead": false,
        "last-updated": 1495922087
    }, {
        "id": 88905126,
        "name": "YMIR",
        "class": "barbarian",
        "gender": 0,
        "level": 3,
        "kills": {
            "elites": 2
        },
        "paragonLevel": 0,
        "hardcore": true,
        "seasonal": false,
        "dead": false,
        "last-updated": 1494593346
    }],
    "lastHeroPlayed": 88593940,
    "lastUpdated": 1495922087,
    "kills": {
        "monsters": 10585,
        "elites": 592,
        "hardcoreMonsters": 10585
    },
    "highestHardcoreLevel": 59,
    "timePlayed": {
        "barbarian": 0.013,
        "crusader": 0.0,
        "demon-hunter": 0.0,
        "monk": 0.0,
        "witch-doctor": 1.0,
        "wizard": 0.0
    },
    "progression": {
        "act1": true,
        "act2": true,
        "act3": true,
        "act4": true,
        "act5": true
    },
    "fallenHeroes": [],
    "blacksmith": {
        "slug": "blacksmith",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "jeweler": {
        "slug": "jeweler",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "mystic": {
        "slug": "mystic",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "blacksmithHardcore": {
        "slug": "blacksmith",
        "level": 1,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "jewelerHardcore": {
        "slug": "jeweler",
        "level": 10,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "mysticHardcore": {
        "slug": "mystic",
        "level": 10,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "blacksmithSeason": {
        "slug": "blacksmith",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "jewelerSeason": {
        "slug": "jeweler",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "mysticSeason": {
        "slug": "mystic",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "blacksmithSeasonHardcore": {
        "slug": "blacksmith",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "jewelerSeasonHardcore": {
        "slug": "jeweler",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "mysticSeasonHardcore": {
        "slug": "mystic",
        "level": 0,
        "stepCurrent": 0,
        "stepMax": 1
    },
    "seasonalProfiles": {
        "season0": {
            "seasonId": 0,
            "paragonLevel": 0,
            "paragonLevelHardcore": 0,
            "kills": {
                "monsters": 10585,
                "elites": 592,
                "hardcoreMonsters": 10585
            },
            "timePlayed": {
                "barbarian": 0.013,
                "crusader": 0.0,
                "demon-hunter": 0.0,
                "monk": 0.0,
                "witch-doctor": 1.0,
                "wizard": 0.0
            },
            "highestHardcoreLevel": 59,
            "progression": {
                "act1": true,
                "act2": true,
                "act3": true,
                "act4": true,
                "act5": true
            }
        }
    }
}</textarea></div>
		<p>Some interesting information we can find in this JSON object is:
		   <dl>
			   <dt><p>The username is stored in the battleTag property.</dt>
				   <dd><p class="code">player1.battleTag</dd>
			   <dt><p>The overall game progression is an object in the player1 object.  Each property is named "act1" through "act5" and has a value of either true or false depending on if  the user ever completed that act.</dt>
			   	<dd><p class="code">player1.progession.act4
			   <dt><p>The player's characters are in a property called "heroes".  "heroes" is a property whose value is an array of objects.  These objects hold crucial information about the player's characters, such as their id and name.  There is no way to know how many characters a player has. Using methods to loop through the heroes without knowing the number is important, so using the .length of an array can be useful.</dt>
				<dd><p class="code">player1.heroes.length</dd>
			   <dt><p>Access a hero's id, name, class, and level as follows(where i is some integer):</dt>
				   <dd><p class="code">player1.heroes[i].id</dd>
				   <dd><p class="code">player1.heroes[i].name</dd>
			           <dd><p class="code">player1.heroes[i].class</dd>
				   <dd><p class="code">player1.heroes[i].level</dd>		   
					
		   </dl>
		<p>Here is an example of using the career profile call.  It uses all the information about the player discussed above.  The code displays which acts mukrumbus-1394 has completed, and also lists all of his characters' names, id's, levels, and classes.
	
 <br><div><iframe height='265' scrolling='no' title='Career Profile API Call example' src='//codepen.io/markovid/embed/oWReoY/?height=265&theme-id=0&default-tab=js,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/markovid/pen/oWReoY/'>Career Profile API Call example</a> by Dylan Markovic (<a href='https://codepen.io/markovid'>@markovid</a>) on <a href='https://codepen.io'>CodePen</a></iframe></div>
   <p>Now that we have access to the player's information, let's find out how to access and use the hero's information.
		
		<div class="wrapper">
			<input type="button" class="button" onclick="location.href='apiCalls.html';" value="Go Back" />
			<input type="button" class="button" onclick="location.href='heroProfile.html';" value="Let's go!" />
		</div>
	</body>
 </html>
